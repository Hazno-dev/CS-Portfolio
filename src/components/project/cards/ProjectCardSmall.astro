---
import Spacer from '@components/core/spacer.astro';
import Text from '@components/text/text.astro';
import { Picture } from 'astro:assets';
import ProjectTitle from '@components/project/project-title.astro';
import ProjectTeam from '@components/project/project-team.astro';
import ProjectTools from '@components/project/project-tools.astro';
import ProjectLanguages from '@components/project/project-languages.astro';
import ProjectContributions from '@components/project/project-contributions.astro';
import ProjectDateTags from '@components/project/project-date-tags.astro';
import MediaElements from '@components/core/image/media-elements.astro';
import TextPair from '@components/text/text-pair.astro';
import ProjectLinks from '@components/project/routing/ProjectLinks.astro';
import MediaElement from '@components/media/MediaElement.astro';
import MediaGallery from '@components/media/MediaGallery.astro';
import DateTimeBlock from '@components/text/dateTimeBlock.astro';
import TextInlineList from '@components/text/TextInlineList.astro';
import HorizontalRow from '@layouts/structure/horizontal-row.astro';
import ProjectDescription from '@components/project/ProjectDescription.astro';
interface Props {
	project: Project;
}

const { project } = {
	project: Astro.props.project
};

const projectLink = project.getProjectLink();
const hasPlatforms = project.data.platforms && project.data.platforms.length > 0;

const videos = project.Media.Videos;
const images = project.Media.Images;
---

<article
	class=`relative inline-flex lg:min-h-170 max-w-xl overflow-hidden rounded-lg break-words md:rounded-[10px] group/project`>
	<div class="pointer-events-none absolute -z-1 h-full w-full bg-black"></div>
	<Picture
		class=`pointer-events-none absolute -z-1 h-full w-full object-cover opacity-25 group-hover/project:opacity-30 scale-101 transition-discrete
 group-hover/project:scale-100 transition-all duration-500 ease-out`
		src={project.getCover()}
		alt=""
		aria-hidden="true"
	/>
	<div class=`image-background pointer-events-none absolute -z-1 h-full w-full`></div>
	<div class=`content-outer flex-col shrink gap-2`>
		<p class="text-tag !mt-0">
			<DateTimeBlock start={project.data.dateStart} end={project.data.dateEnd} />
		</p>
		<ProjectTitle project={project} />
		<Spacer />
		<div class="flex flex-row shrink gap-x-2">
			<div class="hidden lg:flex flex-col grow basis-[50%]">
				<ProjectTeam project={project} />
				<TextPair heading="Tools" type="custom"><ProjectTools project={project} /></TextPair>
				<TextPair heading="Languages" type="custom"><ProjectLanguages project={project} /></TextPair>
			</div>
			<MediaGallery class=`flex-shrink lg:basis-[50%] lg:max-w-1/2 grow-0 aspect-video flex-col place-content-end`>
				<!--<div class="flex flex-shrink aspect-video"/>-->
				{videos.map((video, index) => (index > 0 ? <MediaElement class=`hidden` Source={video}/> : <MediaElement class=`flex shrink grow-0 aspect-video` Source={video} />))}

					{images.map((image) => (<MediaElement class=`hidden` Source={image}/>))}
			</MediaGallery>
		</div>
		<ProjectDescription project={project} />

		<HorizontalRow class="mt-2 flex-col! lg:flex-row!">
			<TextInlineList contents={project.data.tags} class="self-start" />
			<ProjectLinks project={project} class="!mt-0 self-end" />
		</HorizontalRow>

	</div>
</article>