---
import Text from './Text.astro';
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'p'> {
	start: Date;
	end?: Date | null;
	type?: `heading` | `subheading` | `paragraph` | `mono` | `mono-light` | `label` | `sublabel` | `tag` | `tag-heading`;
}

const { start, end, ...attrs } = Astro.props;
const startText = Astro.props.start.toLocaleDateString('en-GB', {
	year: 'numeric',
	month: 'long'
});

const endText =
	Astro.props.end?.toLocaleDateString('en-GB', {
		year: 'numeric',
		month: 'long'
	}) ?? 'Present';

const showEnd = end && startText != endText;
---

<time datetime={start.toISOString()}>
	{startText}
</time>
{
	showEnd && (
		<>
			to
			{end ? <time datetime={end.toISOString()}>{endText}</time> : 'Present'}
		</>
	)
}
