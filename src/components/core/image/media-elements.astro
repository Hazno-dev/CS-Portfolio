---
import type { HTMLAttributes } from 'astro/types';
import ImageItem from '@components/core/imageItem.astro';
import { Picture, Image, getImage } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import MediaElement from '@components/core/image/media-element.astro';
import { YouTube } from 'astro-embed';
//import { LightGallery } from 'astro-lightgallery';
import { LightGallery } from '@components/../../node_modules/astro-lightgallery/src/index.ts';
interface Props extends HTMLAttributes<'image'> {
	project: Project;
}

const { project, ...attrs } = Astro.props;
const videos = project.getVideos();

const optimizedImage = await getImage({
	src: project.getImages()[1].src
});

const images = project.getImages();

---

<LightGallery
	layout={{
		imgs: [{ src: optimizedImage.src }, { src: optimizedImage.src }]
	}}
	options={{
		thumbnail: true,
		animateThumb: false,
		zoomFromOrigin: false,
		allowMediaOverlap: false,
		toggleThumb: true,
		autoplayFirstVideo: false,
		showThumbnailWithPlayButton: true,
	}}
	addPlugins={['video']}
	class=`${attrs.class}`>
	<MediaElement class=`w-[60%] shrink grow hover:w-2/3` src={videos[0].src} alt={videos[0].alt} isVideo={true} thumbnail={videos[0].thumbnail} />
	{videos.slice(1).map((video) => (
		<MediaElement class=`hidden` aria-hidden="true" src={video.src} alt={video.alt} isVideo={true} thumbnail={video.thumbnail} />
	))}
	<MediaElement
		class=`w-1/3 shrink grow hover:w-2/3 glightbox1`
		src={images[0].src}
		alt={images[0].alt}
	/>
	<MediaElement
		class=`hidden w-1/3 shrink grow hover:w-2/3 xl:flex`
		src={images[1].src}
		alt={images[1].alt}
	/>
	{images.slice(2).map((image) => (
		<MediaElement class=`hidden` aria-hidden="true" src={image.src} alt={image.alt} />
	))}
</LightGallery>

<!--<LightGallery
	layout={{
		imgs: [{ src: optimizedImage.src }, { src: optimizedImage.src }]
	}}
	options={{
		thumbnail: true,
		animateThumb: false,
		zoomFromOrigin: false,
		allowMediaOverlap: false,
		toggleThumb: true,
		autoplayFirstVideo: false,
		showThumbnailWithPlayButton: true,
	}}
	addPlugins={['video']}
	class=`${attrs.class}`>
	&lt;!&ndash;	<a
		data-lg-size="1280-720"
		data-src=`https://www.youtube.com/embed/${video.src}?rel=0`
		data-poster=`https://img.youtube.com/vi/${video.src}/maxresdefault.jpg`
		data-sub-html={video.alt}>
		<img
			width="300"
			height="100"
			class="img-responsive"
			src=`https://img.youtube.com/vi/${video.src}/maxresdefault.jpg`
		/>
	</a>&ndash;&gt;
	<MediaElement class=`w-[60%] shrink grow hover:w-2/3` src={videos[0].src} alt={videos[0].alt} isVideo={true} thumbnail={videos[0].thumbnail} />
	{videos.slice(1).map((video) => (
		<MediaElement class=`hidden` aria-hidden="true" src={video.src} alt={video.alt} isVideo={true} thumbnail={video.thumbnail} />
	))}
	<MediaElement
		class=`w-1/3 shrink grow hover:w-2/3 glightbox1`
		src={images[0].src}
		alt={images[0].alt}
	/>
	<MediaElement
		class=`hidden w-1/3 shrink grow hover:w-2/3 xl:flex`
		src={images[1].src}
		alt={images[1].alt}
	/>
	{images.slice(2).map((image) => (
		<MediaElement class=`hidden` aria-hidden="true" src={image.src} alt={image.alt} />
	))}
</LightGallery>-->
