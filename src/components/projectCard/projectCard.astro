---
import type { CollectionEntry } from 'astro:content';
import TitleTab from './tabs/titleTab.astro';
import { Picture } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import Tag from '../tag.astro';

interface Props {
	project: CollectionEntry<'projects'>;
}

const { project, data } = {
	project: Astro.props.project,
	data: Astro.props.project.data
};

const images = import.meta.glob<{ default: ImageMetadata }>(
	'@assets/**/*.{jpeg,jpg,png,gif,webp}'
);
if (!images[data.cover])
	throw new Error(
		`"${data.cover}" does not exist in glob: "@assets/**/*.{jpeg,jpg,png,gif,webp} ${Object.entries(
			images
		)}"`
	);
---

<div
	class="shadow- relative h-80 max-h-80 max-w-full overflow-hidden rounded-lg">
	<Picture
		class="absolute inset-0 h-full w-full bg-fixed bg-no-repeat object-cover brightness-75
			filter"
		src={images[data.cover]()}
		alt=""
	/>
	<div
		class="absolute inset-0 bg-gradient-to-t from-black from-5% to-70% opacity-80">
	</div>
	<div class="black-radial-gradient absolute inset-0 opacity-30"></div>

	<div class="relative h-full w-full p-4">
		<TitleTab
			title={data.title}
			description={data.description}
			tags={data.tags}
		/>
	</div>
</div>
